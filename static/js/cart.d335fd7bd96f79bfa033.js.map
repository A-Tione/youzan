{"version":3,"sources":["webpack:///static/js/cart.d335fd7bd96f79bfa033.js","webpack:///./src/modules/js/api.js?4c58**","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js?c08e","webpack:///./src/modules/js/mixin.js?53fa","webpack:///./src/modules/js/cartService.js"],"names":["webpackJsonp","0","module","__webpack_exports__","__webpack_require__","url","hotLists","banner","topList","rank","subList","searchList","goodsDetails","goodsDeal","cartAdd","cartList","cartReduce","cartRemove","cartMremove","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","1","exports","110","Vue","prototype","$ajax","axios","el","data","shopsList","num","total","editingShop","editingShopIndex","removePopup","removeMsg","removeData","oldNum","computed","allSelected","get","this","length","every","value","checked","set","newVal","forEach","shop","goodsList","goods","allRemoveSelected","removeChecked","numAll","number","price","removeLists","arr","push","watch","created","getList","methods","then","res","list","editing","editingMeg","selectGood","item","e","attr","selectShop","selectAll","edit","shopIndex","i","reduce","good","Cart","id","add","remove","goodIndex","removeList","removeConfirm","delete","splice","removeShop","ids","findIndex","onStart","event","startX","changedTouches","clientX","onEnd","index","endX","volecity","$refs","left","onFocus","console","log","onBlur","mixins","mixin","components","$mount","28","fetch","method","resolve","reject","status","code","location","href","catch","err","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","n","__WEBPACK_IMPORTED_MODULE_1_axios__","__WEBPACK_IMPORTED_MODULE_1_axios___default","7","filters","twoNum","toFixed","time","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","75","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_2_js_fetch__","__WEBPACK_IMPORTED_MODULE_3_js_api__","78","79","80"],"mappings":"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","file":"static/js/cart.d335fd7bd96f79bfa033.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 0:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar url = {\n  hotLists: '/index/hotLists', //商品列表\n  banner: '/index/banner', //首页banner\n  topList: '/category/topList', //商品分类一级分类\n  rank: '/category/rank', //综合分类,\n  subList: '/category/subList', //商品分类二级分类\n  searchList: '/search/list', //商品列表\n  goodsDetails: '/goods/details', //获取商品详情\n  goodsDeal: '/goods/deal', //商品的交易列表\n  cartAdd: '/cart/add', //加入购物车\n  cartList: '/cart/list', //购物车列表\n  cartReduce: '/cart/reduce', //购物车移除商品\n  cartRemove: '/cart/remove', //删除购物车单个商品\n  cartMremove: '/cart/mremove', //删除购物车多个商品\n  addressLists: '/address/list', //地址列表\n  addressAdd: '/cart/add', //地址添加\n  addressRemove: '/cart/remove', //地址删除\n  addressUpdate: '/cart/add', //地址编辑\n  addressSetDefault: '/cart/remove' //默认地址\n\n\n  //开发环境和正式环境的切换\n  // let host = '';//正式\n};var host = 'http://yapi.edaedu.net/mock/105'; //开发\n\nfor (var key in url) {\n  if (url.hasOwnProperty(key)) {\n    //hasOwnProperty 表示对象自身属性中是否具有指定的属性\n    url[key] = host + url[key];\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (url);\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 110:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_css_common_css__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_css_common_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_css_common_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_css__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__cart_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_base_css__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_base_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__cart_base_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cart_trade_css__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cart_trade_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__cart_trade_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_js_api__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_js_mixin__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_velocity_animate__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_velocity_animate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_velocity_animate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_js_cartService__ = __webpack_require__(75);\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_4_vue__[\"default\"].prototype.$ajax = __WEBPACK_IMPORTED_MODULE_5_axios___default.a;\n\nvar app = new __WEBPACK_IMPORTED_MODULE_4_vue__[\"default\"]({\n  el: '#app',\n  data: {\n    shopsList: null, //商品列表\n    num: 1, //默认商品数量\n    total: 0,\n    editingShop: null,\n    editingShopIndex: -1,\n    removePopup: false,\n    removeMsg: '',\n    removeData: null,\n    oldNum: null\n  },\n  computed: {\n    allSelected: {\n      get: function get() {\n        if (this.shopsList && this.shopsList.length) {\n          return this.shopsList.every(function (value) {\n            return value.checked;\n          });\n        }\n        return true;\n      },\n      set: function set(newVal) {\n        this.shopsList.forEach(function (shop) {\n          shop.checked = newVal;\n          shop.goodsList.forEach(function (goods) {\n            goods.checked = newVal;\n          });\n        });\n      }\n    },\n    allRemoveSelected: {\n      //全部删除选择\n      get: function get() {\n        if (this.editingShop) {\n          return this.editingShop.removeChecked;\n        }\n        return false;\n      },\n      set: function set(newVal) {\n        if (this.editingShop) {\n          this.editingShop.removeChecked = newVal;\n          this.editingShop.goodsList.forEach(function (goods) {\n            goods.removeChecked = newVal;\n          });\n        }\n      }\n    },\n    numAll: function numAll() {\n      var _this = this;\n\n      if (this.shopsList && this.shopsList.length) {\n        var number = 0;\n        this.total = 0;\n        this.shopsList.forEach(function (shop) {\n          shop.goodsList.forEach(function (goods) {\n            if (goods.checked) {\n              number += goods.number;\n              _this.total += goods.number * goods.price;\n            }\n          });\n        });\n        return number;\n      }\n    },\n    removeLists: function removeLists() {\n      if (this.editingShop) {\n        var arr = [];\n        this.editingShop.goodsList.forEach(function (goods) {\n          if (goods.removeChecked) {\n            arr.push(goods);\n          }\n        });\n        return arr;\n      }\n      return [];\n    }\n  },\n  watch: {},\n  created: function created() {\n    this.getList();\n  },\n\n  methods: {\n    getList: function getList() {\n      var _this2 = this;\n\n      //渲染购物车列表\n      this.$ajax.get(__WEBPACK_IMPORTED_MODULE_6_js_api__[\"a\" /* default */].cartList).then(function (res) {\n        var list = res.data.shopsList;\n        list.forEach(function (shop) {\n          shop.checked = true;\n          shop.removeChecked = false;\n          shop.editing = false;\n          shop.editingMeg = '编辑';\n          shop.goodsList.forEach(function (goods) {\n            goods.checked = true;\n            goods.removeChecked = false;\n            goods.editing = false;\n          });\n        });\n        _this2.shopsList = list;\n      });\n    },\n    selectGood: function selectGood(item, e) {\n      //选择商品\n      var attr = this.editingShop ? 'removeChecked' : 'checked';\n      item[attr] = !item[attr];\n      e[attr] = e.goodsList.every(function (value) {\n        return value[attr];\n      });\n    },\n    selectShop: function selectShop(e) {\n      //选择店铺\n      var attr = this.editingShop ? 'removeChecked' : 'checked';\n      e[attr] = !e[attr];\n      e.goodsList.forEach(function (value) {\n        value[attr] = e[attr];\n      });\n    },\n    selectAll: function selectAll() {\n      //全选\n      var attr = this.editingShop ? 'allRemoveSelected' : 'allSelected';\n      this[attr] = !this[attr];\n    },\n    edit: function edit(e, shopIndex) {\n      e.editing = !e.editing;\n      e.editingMeg = e.editing ? '完成' : '编辑';\n      this.shopsList.forEach(function (value, i) {\n        if (shopIndex !== i) {\n          value.editing = false;\n          value.editingMeg = e.editing ? '' : '编辑';\n        }\n      });\n      this.editingShop = e.editing ? e : null;\n      this.editingShopIndex = e.editing ? shopIndex : -1;\n    },\n    reduce: function reduce(good) {\n      //减少商品\n      if (good.number < 2) return;\n      __WEBPACK_IMPORTED_MODULE_9_js_cartService__[\"a\" /* default */].reduce(good.id).then(function (res) {\n        good.number--;\n      });\n    },\n    add: function add(good) {\n      //增加商品\n      __WEBPACK_IMPORTED_MODULE_9_js_cartService__[\"a\" /* default */].add(good.id).then(function (res) {\n        good.number++;\n      });\n      // this.$ajax.post(url.cartAdd, {\n      //   id: good.id,\n      //   number: 1\n      // }).then(res => {\n      //   good.number += 1\n      // })\n    },\n    remove: function remove(shop, shopIndex, good, goodIndex) {\n      //删除商品弹框\n      this.removePopup = true;\n      this.removeData = { shop: shop, shopIndex: shopIndex, good: good, goodIndex: goodIndex };\n      this.removeMsg = '确定要删除该商品吗？';\n    },\n    removeList: function removeList() {\n      //删除多个商品\n      this.removePopup = true;\n      this.removeMsg = '\\u786E\\u5B9A\\u5C06\\u6240\\u9009' + this.removeLists.length + '\\u4E2A\\u5546\\u54C1\\u5220\\u9664\\uFF1F';\n    },\n    removeConfirm: function removeConfirm() {\n      var _this3 = this;\n\n      //删除单个/多个商品\n      if (this.removeMsg === '确定要删除该商品吗？') {\n        var _removeData = this.removeData,\n            shop = _removeData.shop,\n            shopIndex = _removeData.shopIndex,\n            good = _removeData.good,\n            goodIndex = _removeData.goodIndex;\n\n        this.$ajax.delete(__WEBPACK_IMPORTED_MODULE_6_js_api__[\"a\" /* default */].cartRemove, {\n          id: good.id\n        }).then(function (res) {\n          shop.goodsList.splice(goodIndex, 1);\n          if (!shop.goodsList.length) {\n            _this3.shopsList.splice(shopIndex, 1);\n            _this3.removeShop();\n          }\n          _this3.removePopup = false;\n        });\n      } else {\n        var ids = [];\n        this.removeLists.forEach(function (good) {\n          ids.push(good.id);\n        });\n        this.$ajax.delete(__WEBPACK_IMPORTED_MODULE_6_js_api__[\"a\" /* default */].cartMremove, {\n          id: ids\n        }).then(function (res) {\n          var arr = [];\n          _this3.editingShop.goodsList.forEach(function (good) {\n            var index = _this3.removeLists.findIndex(function (item) {\n              return item.id == good.id;\n            });\n            if (index === -1) {\n              arr.push(good);\n            }\n          });\n          if (arr.length) {\n            _this3.editingShop.goodsList = arr;\n            _this3.removePopup = false;\n          } else {\n            _this3.shopsList.splice(_this3.editingShopIndex, 1);\n            _this3.removeShop();\n            _this3.removePopup = false;\n          }\n        });\n      }\n    },\n    removeShop: function removeShop() {\n      //店铺下商品都被删除时\n      this.editingShop = null;\n      this.editingShopIndex = -1;\n      this.shopsList.forEach(function (shop) {\n        shop.editing = false;\n        shop.editingMeg = '编辑';\n      });\n    },\n    onStart: function onStart(event, good, e) {\n      //滑动开始\n      // if (!e.editing){\n      good.startX = event.changedTouches[0].clientX;\n      // }\n    },\n    onEnd: function onEnd(event, shopIndex, good, index, e) {\n      //滑动结束   X轴相减\n      // if (!e.editing) {\n      var endX = event.changedTouches[0].clientX;\n      var left = '0';\n      if (good.startX - endX > 100) {\n        // left = '-60px'\n        good.editing = true;\n      }\n      if (endX - good.startX > 100) {\n        // left = '0px'\n        good.editing = false;\n      }\n      __WEBPACK_IMPORTED_MODULE_8_velocity_animate___default()(this.$refs['goods-' + shopIndex + '-' + index], { left: left });\n      // }\n    },\n    onFocus: function onFocus(e) {\n      console.log(e.number, 'onFocus');\n      this.oldNum = e.number;\n    },\n    onBlur: function onBlur(e) {\n      console.log(e.number, 'onBlur');\n      if (!e.number || e.number < 1) {\n        e.number = this.oldNum;\n      }\n    }\n  },\n\n  mixins: [__WEBPACK_IMPORTED_MODULE_7_js_mixin__[\"a\" /* default */]],\n  components: {//组件加载`\n  }\n});\n\napp.$mount();\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_js_api__ = __webpack_require__(0);\n\n\n\n\nfunction fetch(method, url, data) {\n  return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_1_axios___default()({ method: method, url: url, data: data }).then(function (res) {\n      var status = res.data.code;\n      if (status === 1) {\n        resolve(res);\n      }\n      if (status === 300) {\n        location.href = 'login.html';\n        resolve(res);\n      } else {\n        resolve(res);\n      }\n    }).catch(function (err) {\n      resolve(err);\n    });\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (fetch);\n\n/***/ }),\n\n/***/ 7:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar mixin = {\n  filters: { //过滤器\n    twoNum: function twoNum(n) {\n      if (n) return n.toFixed(2);\n    },\n    time: function time(n) {\n      if (n) {\n        var date = new Date(n),\n            Y = date.getFullYear() + '-',\n            M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-',\n            D = date.getDate() + ' ',\n            h = date.getHours() + ':',\n            m = date.getMinutes() + ':',\n            s = date.getSeconds();\n        return M + D + h + m + s;\n      }\n    }\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mixin);\n\n/***/ }),\n\n/***/ 75:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_js_fetch__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_api__ = __webpack_require__(0);\n\n\n\n\n\nvar Cart = function () {\n  function Cart() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Cart);\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Cart, null, [{\n    key: 'add',\n    value: function add(id) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch__[\"a\" /* default */])('post', __WEBPACK_IMPORTED_MODULE_3_js_api__[\"a\" /* default */].cartAdd, {\n        id: id,\n        number: 1\n      });\n    }\n  }, {\n    key: 'reduce',\n    value: function reduce(id) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch__[\"a\" /* default */])('post', __WEBPACK_IMPORTED_MODULE_3_js_api__[\"a\" /* default */].cartReduce, {\n        id: id,\n        number: 1\n      });\n    }\n  }]);\n\n  return Cart;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cart);\n\n/***/ }),\n\n/***/ 78:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 79:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 80:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[110]);\n\n\n// WEBPACK FOOTER //\n// static/js/cart.d335fd7bd96f79bfa033.js","let url = {\r\n  hotLists: '/index/hotLists',//商品列表\r\n  banner: '/index/banner',//首页banner\r\n  topList: '/category/topList',//商品分类一级分类\r\n  rank: '/category/rank',//综合分类,\r\n  subList: '/category/subList',//商品分类二级分类\r\n  searchList: '/search/list',//商品列表\r\n  goodsDetails: '/goods/details',//获取商品详情\r\n  goodsDeal: '/goods/deal',//商品的交易列表\r\n  cartAdd: '/cart/add',//加入购物车\r\n  cartList: '/cart/list',//购物车列表\r\n  cartReduce: '/cart/reduce',//购物车移除商品\r\n  cartRemove: '/cart/remove',//删除购物车单个商品\r\n  cartMremove: '/cart/mremove',//删除购物车多个商品\r\n  addressLists: '/address/list',//地址列表\r\n  addressAdd:'/cart/add',//地址添加\r\n  addressRemove:'/cart/remove',//地址删除\r\n  addressUpdate:'/cart/add',//地址编辑\r\n  addressSetDefault:'/cart/remove',//默认地址\r\n}\r\n\r\n//开发环境和正式环境的切换\r\n// let host = '';//正式\r\nlet host = 'http://yapi.edaedu.net/mock/105';//开发\r\n\r\nfor (let key in url) {\r\n  if (url.hasOwnProperty(key)) {//hasOwnProperty 表示对象自身属性中是否具有指定的属性\r\n    url[key] = host + url[key]\r\n  }\r\n}\r\n\r\nexport default url\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import 'css/common.css'\r\nimport './cart.css'\r\nimport './cart_base.css'\r\nimport './cart_trade.css'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport url from 'js/api'\r\nimport mixin from 'js/mixin'\r\nimport volecity from 'velocity-animate'\r\nimport Cart from 'js/cartService'\r\n\r\nVue.prototype.$ajax = axios;\r\n\r\n\r\nlet app = new Vue({\r\n  el: '#app',\r\n  data: {\r\n    shopsList: null,//商品列表\r\n    num: 1,//默认商品数量\r\n    total: 0,\r\n    editingShop: null,\r\n    editingShopIndex: -1,\r\n    removePopup: false,\r\n    removeMsg: '',\r\n    removeData: null,\r\n    oldNum: null,\r\n  },\r\n  computed: {\r\n    allSelected: {\r\n      get() {\r\n        if (this.shopsList && this.shopsList.length) {\r\n          return this.shopsList.every(value => {\r\n            return value.checked\r\n          })\r\n        }\r\n        return true\r\n      },\r\n      set(newVal) {\r\n        this.shopsList.forEach(shop => {\r\n          shop.checked = newVal\r\n          shop.goodsList.forEach(goods => {\r\n            goods.checked = newVal\r\n          })\r\n        })\r\n      }\r\n    },\r\n    allRemoveSelected: {//全部删除选择\r\n      get() {\r\n        if (this.editingShop) {\r\n          return this.editingShop.removeChecked\r\n        }\r\n        return false\r\n      },\r\n      set(newVal) {\r\n        if (this.editingShop) {\r\n          this.editingShop.removeChecked = newVal\r\n          this.editingShop.goodsList.forEach(goods => {\r\n            goods.removeChecked = newVal\r\n          })\r\n        }\r\n      }\r\n    },\r\n    numAll() {\r\n      if (this.shopsList && this.shopsList.length) {\r\n        let number = 0\r\n        this.total = 0\r\n        this.shopsList.forEach(shop => {\r\n          shop.goodsList.forEach(goods => {\r\n            if (goods.checked) {\r\n              number += goods.number\r\n              this.total += goods.number * goods.price\r\n            }\r\n          })\r\n        })\r\n        return number\r\n      }\r\n    },\r\n    removeLists() {\r\n      if (this.editingShop) {\r\n        let arr = []\r\n        this.editingShop.goodsList.forEach(goods => {\r\n          if (goods.removeChecked) {\r\n            arr.push(goods)\r\n          }\r\n        })\r\n        return arr\r\n      }\r\n      return []\r\n    }\r\n  },\r\n  watch: {},\r\n  created() {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    getList() {//渲染购物车列表\r\n      this.$ajax.get(url.cartList).then(res => {\r\n        let list = res.data.shopsList\r\n        list.forEach(shop => {\r\n          shop.checked = true\r\n          shop.removeChecked = false\r\n          shop.editing = false\r\n          shop.editingMeg = '编辑'\r\n          shop.goodsList.forEach(goods => {\r\n            goods.checked = true\r\n            goods.removeChecked = false\r\n            goods.editing = false\r\n          })\r\n        })\r\n        this.shopsList = list\r\n      })\r\n    },\r\n    selectGood(item, e) {//选择商品\r\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\r\n      item[attr] = !item[attr]\r\n      e[attr] = e.goodsList.every(value => {\r\n        return value[attr]\r\n      })\r\n    },\r\n    selectShop(e) {//选择店铺\r\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\r\n      e[attr] = !e[attr]\r\n      e.goodsList.forEach(value => {\r\n        value[attr] = e[attr]\r\n      })\r\n    },\r\n    selectAll() {//全选\r\n      let attr = this.editingShop ? 'allRemoveSelected' : 'allSelected'\r\n      this[attr] = !this[attr]\r\n    },\r\n    edit(e, shopIndex) {\r\n      e.editing = !e.editing\r\n      e.editingMeg = e.editing ? '完成' : '编辑'\r\n      this.shopsList.forEach((value, i) => {\r\n        if (shopIndex !== i) {\r\n          value.editing = false\r\n          value.editingMeg = e.editing ? '' : '编辑'\r\n        }\r\n      })\r\n      this.editingShop = e.editing ? e : null\r\n      this.editingShopIndex = e.editing ? shopIndex : -1\r\n    },\r\n    reduce(good) {//减少商品\r\n      if (good.number < 2) return\r\n      Cart.reduce(good.id).then(res => {\r\n        good.number--\r\n      })\r\n\r\n    },\r\n    add(good) {//增加商品\r\n      Cart.add(good.id).then(res => {\r\n        good.number++\r\n      })\r\n      // this.$ajax.post(url.cartAdd, {\r\n      //   id: good.id,\r\n      //   number: 1\r\n      // }).then(res => {\r\n      //   good.number += 1\r\n      // })\r\n    },\r\n    remove(shop, shopIndex, good, goodIndex) {//删除商品弹框\r\n      this.removePopup = true\r\n      this.removeData = {shop, shopIndex, good, goodIndex}\r\n      this.removeMsg = '确定要删除该商品吗？'\r\n    },\r\n    removeList() {//删除多个商品\r\n      this.removePopup = true\r\n      this.removeMsg = `确定将所选${this.removeLists.length}个商品删除？`\r\n    },\r\n    removeConfirm() {//删除单个/多个商品\r\n      if (this.removeMsg === '确定要删除该商品吗？') {\r\n        let {shop, shopIndex, good, goodIndex} = this.removeData\r\n        this.$ajax.delete(url.cartRemove, {\r\n          id: good.id\r\n        }).then(res => {\r\n          shop.goodsList.splice(goodIndex, 1)\r\n          if (!shop.goodsList.length) {\r\n            this.shopsList.splice(shopIndex, 1)\r\n            this.removeShop()\r\n          }\r\n          this.removePopup = false\r\n        })\r\n      } else {\r\n        let ids = []\r\n        this.removeLists.forEach(good => {\r\n          ids.push(good.id)\r\n        })\r\n        this.$ajax.delete(url.cartMremove, {\r\n          id: ids\r\n        }).then(res => {\r\n          let arr = []\r\n          this.editingShop.goodsList.forEach(good => {\r\n            let index = this.removeLists.findIndex(item => {\r\n              return item.id == good.id\r\n            })\r\n            if (index === -1) {\r\n              arr.push(good)\r\n            }\r\n          })\r\n          if (arr.length) {\r\n            this.editingShop.goodsList = arr\r\n            this.removePopup = false\r\n          } else {\r\n            this.shopsList.splice(this.editingShopIndex, 1)\r\n            this.removeShop()\r\n            this.removePopup = false\r\n          }\r\n        })\r\n      }\r\n    },\r\n    removeShop() {//店铺下商品都被删除时\r\n      this.editingShop = null\r\n      this.editingShopIndex = -1\r\n      this.shopsList.forEach(shop => {\r\n        shop.editing = false\r\n        shop.editingMeg = '编辑'\r\n      })\r\n    },\r\n    onStart(event, good,e) {//滑动开始\r\n      // if (!e.editing){\r\n        good.startX = event.changedTouches[0].clientX\r\n      // }\r\n    },\r\n    onEnd(event, shopIndex, good, index,e) {//滑动结束   X轴相减\r\n      // if (!e.editing) {\r\n        let endX = event.changedTouches[0].clientX\r\n        let left = '0'\r\n        if (good.startX - endX > 100) {\r\n          // left = '-60px'\r\n          good.editing = true\r\n        }\r\n        if (endX - good.startX > 100) {\r\n          // left = '0px'\r\n          good.editing = false\r\n        }\r\n        volecity(this.$refs[`goods-${shopIndex}-${index}`], {left})\r\n      // }\r\n    },\r\n    onFocus(e) {\r\n      console.log(e.number, 'onFocus')\r\n      this.oldNum = e.number\r\n\r\n    },\r\n    onBlur(e) {\r\n      console.log(e.number, 'onBlur')\r\n      if (!e.number || e.number<1) {\r\n        e.number = this.oldNum\r\n      }\r\n    },\r\n  },\r\n\r\n  mixins: [mixin],\r\n  components: {//组件加载`\r\n  },\r\n})\r\n\r\n\r\napp.$mount()\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import axios from 'axios'\r\nimport url from 'js/api'\r\n\r\nfunction fetch(method,url,data){\r\n  return new Promise((resolve,reject)=>{\r\n    axios({method:method,url,data}).then(res=>{\r\n      let status = res.data.code\r\n      if (status === 1) {\r\n        resolve(res)\r\n      }\r\n      if ( status === 300){\r\n        location.href = 'login.html'\r\n        resolve(res)\r\n      }else {\r\n        resolve(res)\r\n      }\r\n    }).catch(err=>{\r\n      resolve(err)\r\n    })\r\n  })\r\n}\r\n\r\nexport default fetch\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js","let mixin = {\r\n  filters: {//过滤器\r\n    twoNum: (n) => {\r\n      if (n)\r\n        return n.toFixed(2)\r\n    },\r\n    time: (n) => {\r\n      if (n) {\r\n        let date = new Date(n),\r\n          Y = date.getFullYear() + '-',\r\n          M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-',\r\n          D = date.getDate() + ' ',\r\n          h = date.getHours() + ':',\r\n          m = date.getMinutes() + ':',\r\n          s = date.getSeconds();\r\n        return M + D + h + m + s\r\n      }\r\n    }\r\n  },\r\n}\r\n\r\nexport default mixin\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import fetch from 'js/fetch'\r\nimport url from 'js/api'\r\n\r\nclass Cart{\r\n  static add(id){\r\n    return fetch('post',url.cartAdd,{\r\n      id,\r\n      number:1\r\n    })\r\n  }\r\n  static reduce(id){\r\n    return fetch('post',url.cartReduce,{\r\n      id,\r\n      number:1\r\n    })\r\n  }\r\n}\r\n\r\nexport default Cart\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js"],"sourceRoot":""}